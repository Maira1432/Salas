{"ast":null,"code":"var _jsxFileName = \"/Users/mairaquintero/Desktop/project-salas/src/pages/CreateReservation.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { Menu } from 'lucide-react';\nimport Sidebar from '../components/Sidebar';\nimport ReservationForm from '../components/ReservationForm';\nimport OutlookSync from '../components/OutlookSync';\nimport { useReservations } from '../context/ReservationsContext';\nimport { useParams } from 'react-router-dom'; //Para leer el ID de la URL\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CreateReservation = ({\n  userName,\n  sidebarOpen,\n  toggleSidebar,\n  currentPath,\n  onUpsert\n}) => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const {\n    reservations,\n    addOrUpdate\n  } = useReservations(); // Trae la lista y la funci贸n\n  const navigate = useNavigate(); // Necesario si usas onCancel/redirecci贸n\n\n  // 1. NUEVO ESTADO PARA LA RESERVA EN EDICIN\n  const [reservationToEdit, setReservationToEdit] = useState(undefined);\n  const isEditing = !!id;\n  // 2. LGICA DE BSQUEDA REACTIVA (Reemplaza la l铆nea 'const reservationToEdit = reservations.find(...)')\n  useEffect(() => {\n    // Solo buscamos si estamos en modo edici贸n Y la lista ya tiene elementos\n    if (isEditing && reservations.length > 0) {\n      // CORRECCIN CRTICA: B煤squeda y conversi贸n a string para asegurar el match\n      const foundReservation = reservations.find(r => String(r.id) === id);\n\n      // Guardar el objeto encontrado en el estado del componente\n      setReservationToEdit(foundReservation);\n    }\n  }, [reservations, id, isEditing]); // Este efecto se ejecuta cada vez que llega nueva data al contexto\n\n  // 3. LGICA DE ESPERA EN EL RENDER\n  if (isEditing && !reservationToEdit) {\n    // Se muestra mientras el useEffect busca la reserva\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-auto max-w-4xl mt-10 p-6 text-center\",\n      children: \"Cargando datos de la reserva...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this);\n  }\n\n  // 4. PASAR EL OBJETO ENCONTRADO AL FORMULARIO\n  return (\n    /*#__PURE__*/\n    // ... el resto del layout ...\n    _jsxDEV(ReservationForm, {\n      userName: userName,\n      reservationToEdit: reservationToEdit //  Usa el objeto de estado\n      ,\n      onUpsert: addOrUpdate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)\n    // ...\n  );\n};\n_s(CreateReservation, \"d9Cslxp3GNyfpTW3vcOhFcWgVmw=\", true, function () {\n  return [useParams, useReservations];\n});\n_c = CreateReservation;\nexport default CreateReservation;\nvar _c;\n$RefreshReg$(_c, \"CreateReservation\");","map":{"version":3,"names":["React","useState","useEffect","motion","Menu","Sidebar","ReservationForm","OutlookSync","useReservations","useParams","jsxDEV","_jsxDEV","CreateReservation","userName","sidebarOpen","toggleSidebar","currentPath","onUpsert","_s","id","reservations","addOrUpdate","navigate","useNavigate","reservationToEdit","setReservationToEdit","undefined","isEditing","length","foundReservation","find","r","String","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/mairaquintero/Desktop/project-salas/src/pages/CreateReservation.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { Menu } from 'lucide-react';\nimport Sidebar from '../components/Sidebar';\nimport ReservationForm from '../components/ReservationForm';\nimport OutlookSync from '../components/OutlookSync';\nimport { useReservations } from '../context/ReservationsContext';\nimport { useParams } from 'react-router-dom'; //Para leer el ID de la URL\n\nconst CreateReservation = ({\n  userName,\n  sidebarOpen,\n  toggleSidebar,\n  currentPath,\n  onUpsert,\n}) => {\n  const { id } = useParams(); \n  const { reservations, addOrUpdate } = useReservations(); // Trae la lista y la funci贸n\n  const navigate = useNavigate(); // Necesario si usas onCancel/redirecci贸n\n  \n  // 1. NUEVO ESTADO PARA LA RESERVA EN EDICIN\n  const [reservationToEdit, setReservationToEdit] = useState(undefined);\n\n  const isEditing = !!id;\n  // 2. LGICA DE BSQUEDA REACTIVA (Reemplaza la l铆nea 'const reservationToEdit = reservations.find(...)')\n  useEffect(() => {\n    \n    // Solo buscamos si estamos en modo edici贸n Y la lista ya tiene elementos\n    if (isEditing && reservations.length > 0) {\n        // CORRECCIN CRTICA: B煤squeda y conversi贸n a string para asegurar el match\n        const foundReservation = reservations.find(r => String(r.id) === id);\n        \n        // Guardar el objeto encontrado en el estado del componente\n        setReservationToEdit(foundReservation);\n    }\n  }, [reservations, id, isEditing]); // Este efecto se ejecuta cada vez que llega nueva data al contexto\n\n  // 3. LGICA DE ESPERA EN EL RENDER\n  if (isEditing && !reservationToEdit) {\n    // Se muestra mientras el useEffect busca la reserva\n    return (\n      <div className=\"mx-auto max-w-4xl mt-10 p-6 text-center\">\n        Cargando datos de la reserva...\n      </div>\n    );\n  }\n  \n  // 4. PASAR EL OBJETO ENCONTRADO AL FORMULARIO\n  return (\n    // ... el resto del layout ...\n      <ReservationForm\n        userName={userName}\n        reservationToEdit={reservationToEdit} //  Usa el objeto de estado\n        onUpsert={addOrUpdate}\n      />\n    // ...\n  );\n};\n\nexport default CreateReservation;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,MAAM,QAAQ,eAAe;AACtC,SAASC,IAAI,QAAQ,cAAc;AACnC,OAAOC,OAAO,MAAM,uBAAuB;AAC3C,OAAOC,eAAe,MAAM,+BAA+B;AAC3D,OAAOC,WAAW,MAAM,2BAA2B;AACnD,SAASC,eAAe,QAAQ,gCAAgC;AAChE,SAASC,SAAS,QAAQ,kBAAkB,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAE9C,MAAMC,iBAAiB,GAAGA,CAAC;EACzBC,QAAQ;EACRC,WAAW;EACXC,aAAa;EACbC,WAAW;EACXC;AACF,CAAC,KAAK;EAAAC,EAAA;EACJ,MAAM;IAAEC;EAAG,CAAC,GAAGV,SAAS,CAAC,CAAC;EAC1B,MAAM;IAAEW,YAAY;IAAEC;EAAY,CAAC,GAAGb,eAAe,CAAC,CAAC,CAAC,CAAC;EACzD,MAAMc,QAAQ,GAAGC,WAAW,CAAC,CAAC,CAAC,CAAC;;EAEhC;EACA,MAAM,CAACC,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGxB,QAAQ,CAACyB,SAAS,CAAC;EAErE,MAAMC,SAAS,GAAG,CAAC,CAACR,EAAE;EACtB;EACAjB,SAAS,CAAC,MAAM;IAEd;IACA,IAAIyB,SAAS,IAAIP,YAAY,CAACQ,MAAM,GAAG,CAAC,EAAE;MACtC;MACA,MAAMC,gBAAgB,GAAGT,YAAY,CAACU,IAAI,CAACC,CAAC,IAAIC,MAAM,CAACD,CAAC,CAACZ,EAAE,CAAC,KAAKA,EAAE,CAAC;;MAEpE;MACAM,oBAAoB,CAACI,gBAAgB,CAAC;IAC1C;EACF,CAAC,EAAE,CAACT,YAAY,EAAED,EAAE,EAAEQ,SAAS,CAAC,CAAC,CAAC,CAAC;;EAEnC;EACA,IAAIA,SAAS,IAAI,CAACH,iBAAiB,EAAE;IACnC;IACA,oBACEb,OAAA;MAAKsB,SAAS,EAAC,yCAAyC;MAAAC,QAAA,EAAC;IAEzD;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAEV;;EAEA;EACA;IAAA;IACE;IACE3B,OAAA,CAACL,eAAe;MACdO,QAAQ,EAAEA,QAAS;MACnBW,iBAAiB,EAAEA,iBAAkB,CAAC;MAAA;MACtCP,QAAQ,EAAEI;IAAY;MAAAc,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACvB;IACH;EAAA;AAEJ,CAAC;AAACpB,EAAA,CAhDIN,iBAAiB;EAAA,QAONH,SAAS,EACcD,eAAe;AAAA;AAAA+B,EAAA,GARjD3B,iBAAiB;AAkDvB,eAAeA,iBAAiB;AAAC,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}