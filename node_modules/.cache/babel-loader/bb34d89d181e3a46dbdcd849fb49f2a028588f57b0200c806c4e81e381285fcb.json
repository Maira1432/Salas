{"ast":null,"code":"var _jsxFileName = \"/Users/mairaquintero/Desktop/project-salas/src/pages/MyReservations.js\",\n  _s = $RefreshSig$();\n// src/pages/MyReservations.jsx (o donde renders la lista del usuario)\nimport { useState } from 'react';\nimport useReservations from './context/ReservationsContext';\nimport apiDeleteReservation from './api/reservations';\nimport { Trash2, Loader2 } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MyReservations({\n  accessToken\n}) {\n  _s();\n  const {\n    reservations,\n    removeById\n  } = useReservations();\n  const [busyId, setBusyId] = useState(null);\n  const [error, setError] = useState('');\n  async function handleDelete(reservation) {\n    setError('');\n    const id = reservation.id || reservation._id;\n    if (!id) {\n      setError('ID de reserva inválido.');\n      return;\n    }\n\n    // Confirmación nativa mínima (puedes usar tu modal si prefieres)\n    const ok = window.confirm(`¿Eliminar la reserva “${reservation.title || 'sin título'}”?`);\n    if (!ok) return;\n\n    // Optimista: quitar de la UI\n    setBusyId(id);\n    removeById(id);\n    try {\n      await apiDeleteReservation(id, accessToken);\n      // éxito → nada más\n    } catch (err) {\n      // Revertir: vuelve a cargar (o reinyecta la reserva si la tienes a mano)\n      setError(err.message || 'No se pudo eliminar.');\n      // Opción A: recargar desde el servidor\n      // await refetchReservations();\n      // Opción B: reinyectar esta tarjeta (si la tienes en la mano)\n    } finally {\n      setBusyId(null);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-3\",\n    children: [error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-sm text-red-600 dark:text-red-400\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 17\n    }, this), reservations.map(r => {\n      var _r$room, _r$room2;\n      return /*#__PURE__*/_jsxDEV(\"article\", {\n        className: \"rounded-xl border border-gray-200 dark:border-[#232A36] bg-white dark:bg-[#171B22] p-4 flex items-start justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-semibold text-gray-900 dark:text-white\",\n            children: r.title || 'Reserva'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600 dark:text-gray-300\",\n            children: [((_r$room = r.room) === null || _r$room === void 0 ? void 0 : _r$room.nombre) || ((_r$room2 = r.room) === null || _r$room2 === void 0 ? void 0 : _r$room2.name) || r.roomId, \" \\xB7\", ' ', new Date(r.startTime || r.start).toLocaleString([], {\n              dateStyle: 'medium',\n              timeStyle: 'short'\n            }), \"\\u2013\", new Date(r.endTime || r.end).toLocaleTimeString([], {\n              hour: '2-digit',\n              minute: '2-digit'\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDelete(r),\n          disabled: busyId === (r.id || r._id),\n          className: \"inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm border border-gray-200 dark:border-[#2A3342] hover:bg-gray-50 dark:hover:bg-[#141922] disabled:opacity-60 disabled:cursor-not-allowed\",\n          children: [busyId === (r.id || r._id) ? /*#__PURE__*/_jsxDEV(Loader2, {\n            className: \"w-4 h-4 animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 43\n          }, this) : /*#__PURE__*/_jsxDEV(Trash2, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 90\n          }, this), \"Eliminar\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this)]\n      }, r.id || r._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n_s(MyReservations, \"UJW+aHb3G4HbGD1gOjqXZTjK16M=\", false, function () {\n  return [useReservations];\n});\n_c = MyReservations;\nvar _c;\n$RefreshReg$(_c, \"MyReservations\");","map":{"version":3,"names":["useState","useReservations","apiDeleteReservation","Trash2","Loader2","jsxDEV","_jsxDEV","MyReservations","accessToken","_s","reservations","removeById","busyId","setBusyId","error","setError","handleDelete","reservation","id","_id","ok","window","confirm","title","err","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","r","_r$room","_r$room2","room","nombre","name","roomId","Date","startTime","start","toLocaleString","dateStyle","timeStyle","endTime","end","toLocaleTimeString","hour","minute","onClick","disabled","_c","$RefreshReg$"],"sources":["/Users/mairaquintero/Desktop/project-salas/src/pages/MyReservations.js"],"sourcesContent":["// src/pages/MyReservations.jsx (o donde renders la lista del usuario)\nimport { useState } from 'react';\nimport  useReservations  from './context/ReservationsContext';\nimport apiDeleteReservation from './api/reservations';\nimport { Trash2, Loader2 } from 'lucide-react';\n\nexport default function MyReservations({ accessToken }) {\n  const { reservations, removeById } = useReservations();\n  const [busyId, setBusyId] = useState(null);\n  const [error, setError] = useState('');\n\n  async function handleDelete(reservation) {\n    setError('');\n    const id = reservation.id || reservation._id;\n    if (!id) { setError('ID de reserva inválido.'); return; }\n\n    // Confirmación nativa mínima (puedes usar tu modal si prefieres)\n    const ok = window.confirm(`¿Eliminar la reserva “${reservation.title || 'sin título'}”?`);\n    if (!ok) return;\n\n    // Optimista: quitar de la UI\n    setBusyId(id);\n    removeById(id);\n\n    try {\n      await apiDeleteReservation(id, accessToken);\n      // éxito → nada más\n    } catch (err) {\n      // Revertir: vuelve a cargar (o reinyecta la reserva si la tienes a mano)\n      setError(err.message || 'No se pudo eliminar.');\n      // Opción A: recargar desde el servidor\n      // await refetchReservations();\n      // Opción B: reinyectar esta tarjeta (si la tienes en la mano)\n    } finally {\n      setBusyId(null);\n    }\n  }\n\n  return (\n    <div className=\"space-y-3\">\n      {error && <p className=\"text-sm text-red-600 dark:text-red-400\">{error}</p>}\n\n      {reservations.map(r => (\n        <article key={r.id || r._id}\n          className=\"rounded-xl border border-gray-200 dark:border-[#232A36] bg-white dark:bg-[#171B22] p-4 flex items-start justify-between\">\n          <div>\n            <h4 className=\"font-semibold text-gray-900 dark:text-white\">{r.title || 'Reserva'}</h4>\n            <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n              {r.room?.nombre || r.room?.name || r.roomId} ·\n              {' '}{new Date(r.startTime || r.start).toLocaleString([], { dateStyle:'medium', timeStyle:'short' })}– \n              {new Date(r.endTime || r.end).toLocaleTimeString([], { hour:'2-digit', minute:'2-digit' })}\n            </p>\n          </div>\n\n          <button\n            onClick={() => handleDelete(r)}\n            disabled={busyId === (r.id || r._id)}\n            className=\"inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm border border-gray-200 dark:border-[#2A3342]\n                       hover:bg-gray-50 dark:hover:bg-[#141922] disabled:opacity-60 disabled:cursor-not-allowed\">\n            {busyId === (r.id || r._id) ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Trash2 className=\"w-4 h-4\" />}\n            Eliminar\n          </button>\n        </article>\n      ))}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}