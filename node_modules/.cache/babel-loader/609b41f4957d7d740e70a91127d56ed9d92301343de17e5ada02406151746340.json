{"ast":null,"code":"// src/utils/csv.js\nconst csvEscape = val => {\n  const s = (val !== null && val !== void 0 ? val : '').toString().replace(/\\r?\\n/g, ' ').trim();\n  if (s.includes(',') || s.includes('\"')) {\n    return `\"${s.replace(/\"/g, '\"\"')}\"`;\n  }\n  return s;\n};\nexport const buildReservationsCSV = (reservations = []) => {\n  const headers = ['ID', 'Título', 'Usuario', 'Sala', 'Inicio', 'Fin', 'Estado', 'Invitados', 'OutlookId'];\n  const rows = reservations.map(r => {\n    var _r$room;\n    return [r.id, r.title || '', r.user || '', ((_r$room = r.room) === null || _r$room === void 0 ? void 0 : _r$room.nombre) || '', new Date(r.startTime).toISOString(), new Date(r.endTime).toISOString(), r.status || '', Array.isArray(r.attendees) ? r.attendees.join('; ') : '', r.outlookEventId || ''].map(csvEscape).join(',');\n  });\n  return [headers.join(','), ...rows].join('\\r\\n');\n};\nexport const downloadReservationsCSV = (reservations, filename = 'reservas.csv') => {\n  const csv = buildReservationsCSV(reservations);\n  const blob = new Blob([csv], {\n    type: 'text/csv;charset=utf-8'\n  });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = filename;\n  a.click();\n  URL.revokeObjectURL(url);\n};","map":{"version":3,"names":["csvEscape","val","s","toString","replace","trim","includes","buildReservationsCSV","reservations","headers","rows","map","r","_r$room","id","title","user","room","nombre","Date","startTime","toISOString","endTime","status","Array","isArray","attendees","join","outlookEventId","downloadReservationsCSV","filename","csv","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL"],"sources":["/Users/mairaquintero/Desktop/project-salas/src/utils/csv.js"],"sourcesContent":["// src/utils/csv.js\nconst csvEscape = (val) => {\n  const s = (val ?? '').toString().replace(/\\r?\\n/g, ' ').trim();\n  if (s.includes(',') || s.includes('\"')) {\n    return `\"${s.replace(/\"/g, '\"\"')}\"`;\n  }\n  return s;\n};\n\nexport const buildReservationsCSV = (reservations = []) => {\n  const headers = [\n    'ID','Título','Usuario','Sala','Inicio','Fin','Estado','Invitados','OutlookId'\n  ];\n  const rows = reservations.map(r => ([\n    r.id,\n    r.title || '',\n    r.user || '',\n    r.room?.nombre || '',\n    new Date(r.startTime).toISOString(),\n    new Date(r.endTime).toISOString(),\n    r.status || '',\n    Array.isArray(r.attendees) ? r.attendees.join('; ') : '',\n    r.outlookEventId || ''\n  ].map(csvEscape).join(',')));\n\n  return [headers.join(','), ...rows].join('\\r\\n');\n};\n\nexport const downloadReservationsCSV = (reservations, filename = 'reservas.csv') => {\n  const csv = buildReservationsCSV(reservations);\n  const blob = new Blob([csv], { type: 'text/csv;charset=utf-8' });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url; a.download = filename; a.click();\n  URL.revokeObjectURL(url);\n};\n"],"mappings":"AAAA;AACA,MAAMA,SAAS,GAAIC,GAAG,IAAK;EACzB,MAAMC,CAAC,GAAG,CAACD,GAAG,aAAHA,GAAG,cAAHA,GAAG,GAAI,EAAE,EAAEE,QAAQ,CAAC,CAAC,CAACC,OAAO,CAAC,QAAQ,EAAE,GAAG,CAAC,CAACC,IAAI,CAAC,CAAC;EAC9D,IAAIH,CAAC,CAACI,QAAQ,CAAC,GAAG,CAAC,IAAIJ,CAAC,CAACI,QAAQ,CAAC,GAAG,CAAC,EAAE;IACtC,OAAO,IAAIJ,CAAC,CAACE,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG;EACrC;EACA,OAAOF,CAAC;AACV,CAAC;AAED,OAAO,MAAMK,oBAAoB,GAAGA,CAACC,YAAY,GAAG,EAAE,KAAK;EACzD,MAAMC,OAAO,GAAG,CACd,IAAI,EAAC,QAAQ,EAAC,SAAS,EAAC,MAAM,EAAC,QAAQ,EAAC,KAAK,EAAC,QAAQ,EAAC,WAAW,EAAC,WAAW,CAC/E;EACD,MAAMC,IAAI,GAAGF,YAAY,CAACG,GAAG,CAACC,CAAC;IAAA,IAAAC,OAAA;IAAA,OAAK,CAClCD,CAAC,CAACE,EAAE,EACJF,CAAC,CAACG,KAAK,IAAI,EAAE,EACbH,CAAC,CAACI,IAAI,IAAI,EAAE,EACZ,EAAAH,OAAA,GAAAD,CAAC,CAACK,IAAI,cAAAJ,OAAA,uBAANA,OAAA,CAAQK,MAAM,KAAI,EAAE,EACpB,IAAIC,IAAI,CAACP,CAAC,CAACQ,SAAS,CAAC,CAACC,WAAW,CAAC,CAAC,EACnC,IAAIF,IAAI,CAACP,CAAC,CAACU,OAAO,CAAC,CAACD,WAAW,CAAC,CAAC,EACjCT,CAAC,CAACW,MAAM,IAAI,EAAE,EACdC,KAAK,CAACC,OAAO,CAACb,CAAC,CAACc,SAAS,CAAC,GAAGd,CAAC,CAACc,SAAS,CAACC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,EACxDf,CAAC,CAACgB,cAAc,IAAI,EAAE,CACvB,CAACjB,GAAG,CAACX,SAAS,CAAC,CAAC2B,IAAI,CAAC,GAAG,CAAC;EAAA,CAAC,CAAC;EAE5B,OAAO,CAAClB,OAAO,CAACkB,IAAI,CAAC,GAAG,CAAC,EAAE,GAAGjB,IAAI,CAAC,CAACiB,IAAI,CAAC,MAAM,CAAC;AAClD,CAAC;AAED,OAAO,MAAME,uBAAuB,GAAGA,CAACrB,YAAY,EAAEsB,QAAQ,GAAG,cAAc,KAAK;EAClF,MAAMC,GAAG,GAAGxB,oBAAoB,CAACC,YAAY,CAAC;EAC9C,MAAMwB,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACF,GAAG,CAAC,EAAE;IAAEG,IAAI,EAAE;EAAyB,CAAC,CAAC;EAChE,MAAMC,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACL,IAAI,CAAC;EACrC,MAAMM,CAAC,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;EACrCF,CAAC,CAACG,IAAI,GAAGN,GAAG;EAAEG,CAAC,CAACI,QAAQ,GAAGZ,QAAQ;EAAEQ,CAAC,CAACK,KAAK,CAAC,CAAC;EAC9CP,GAAG,CAACQ,eAAe,CAACT,GAAG,CAAC;AAC1B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}