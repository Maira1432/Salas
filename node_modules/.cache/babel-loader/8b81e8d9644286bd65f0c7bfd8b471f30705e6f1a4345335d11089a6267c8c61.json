{"ast":null,"code":"// src/utils/reservations.js\n\n// Catálogo de salas (usa estos objetos en todo el proyecto)\nexport const rooms = [{\n  id: '1',\n  nombre: 'Círculo de Sabios I',\n  capacidad: 5\n}, {\n  id: '2',\n  nombre: 'Círculo de Sabios II',\n  capacidad: 5\n}, {\n  id: '3',\n  nombre: 'Círculo de Sabios III',\n  capacidad: 5\n}, {\n  id: '4',\n  nombre: 'Consejo de la Tribu',\n  capacidad: 12\n}, {\n  id: '5',\n  nombre: 'Plaza de Conexiones',\n  capacidad: 6\n}];\n\n// Reserva inicial de ejemplo (fechas en ISO; en memoria se convierten a Date)\nexport const initialReservations = [{\n  id: '1',\n  user: 'Juan Pérez',\n  room: rooms[0],\n  startTime: '2024-10-15T10:00:00.000Z',\n  endTime: '2024-10-15T11:00:00.000Z',\n  title: 'Reunión equipo',\n  description: 'Discusión semanal',\n  status: 'confirmed'\n}, {\n  id: '2',\n  user: 'Ana García',\n  room: rooms[1],\n  startTime: '2024-10-16T14:00:00.000Z',\n  endTime: '2024-10-16T15:30:00.000Z',\n  title: 'Presentación',\n  description: 'Demo del proyecto',\n  status: 'pending'\n}, {\n  id: '3',\n  user: 'Carlos López',\n  room: rooms[0],\n  startTime: '2024-10-17T09:00:00.000Z',\n  endTime: '2024-10-17T10:30:00.000Z',\n  title: 'Entrevista',\n  description: 'Candidato nuevo',\n  status: 'confirmed'\n}];\n\n// ID corto y único\nexport const generateId = () => Date.now().toString(36) + Math.random().toString(36).slice(2);\n\n// --- Bonus: utilidades para choques de horario (a usar cuando quieras) ---\nexport const overlaps = (aStart, aEnd, bStart, bEnd) => new Date(aStart) < new Date(bEnd) && new Date(bStart) < new Date(aEnd);\n\n// Añade/actualiza esta función en src/utils/reservations.js\nexport const hasRoomConflict = (reservations, {\n  id,\n  roomId,\n  startTime,\n  endTime\n}, bufferMin = 10 // <-- buffer configurable en minutos (default 10)\n) => {\n  const start = new Date(startTime).getTime();\n  const end = new Date(endTime).getTime();\n  const b = bufferMin * 60 * 1000; // a ms\n\n  return reservations.some(r => {\n    var _r$room;\n    if (!(r !== null && r !== void 0 && (_r$room = r.room) !== null && _r$room !== void 0 && _r$room.id)) return false;\n    if (r.room.id !== roomId) return false;\n    if (r.id === id) return false;\n    const rs = new Date(r.startTime).getTime();\n    const re = new Date(r.endTime).getTime();\n\n    // Solape considerando buffer a ambos lados:\n    // [start, end] choca con [rs - b, re + b]\n    return start < re + b && rs - b < end;\n  });\n};","map":{"version":3,"names":["rooms","id","nombre","capacidad","initialReservations","user","room","startTime","endTime","title","description","status","generateId","Date","now","toString","Math","random","slice","overlaps","aStart","aEnd","bStart","bEnd","hasRoomConflict","reservations","roomId","bufferMin","start","getTime","end","b","some","r","_r$room","rs","re"],"sources":["/Users/mairaquintero/Desktop/project-salas/src/utils/reservations.js"],"sourcesContent":["// src/utils/reservations.js\n\n// Catálogo de salas (usa estos objetos en todo el proyecto)\nexport const rooms = [\n  { id: '1', nombre: 'Círculo de Sabios I', capacidad: 5 },\n  { id: '2', nombre: 'Círculo de Sabios II', capacidad: 5 },\n  { id: '3', nombre: 'Círculo de Sabios III', capacidad: 5 },\n  { id: '4', nombre: 'Consejo de la Tribu', capacidad: 12 },\n  { id: '5', nombre: 'Plaza de Conexiones', capacidad: 6 },\n];\n\n// Reserva inicial de ejemplo (fechas en ISO; en memoria se convierten a Date)\nexport const initialReservations = [\n  {\n    id: '1',\n    user: 'Juan Pérez',\n    room: rooms[0],\n    startTime: '2024-10-15T10:00:00.000Z',\n    endTime: '2024-10-15T11:00:00.000Z',\n    title: 'Reunión equipo',\n    description: 'Discusión semanal',\n    status: 'confirmed',\n  },\n  {\n    id: '2',\n    user: 'Ana García',\n    room: rooms[1],\n    startTime: '2024-10-16T14:00:00.000Z',\n    endTime: '2024-10-16T15:30:00.000Z',\n    title: 'Presentación',\n    description: 'Demo del proyecto',\n    status: 'pending',\n  },\n  {\n    id: '3',\n    user: 'Carlos López',\n    room: rooms[0],\n    startTime: '2024-10-17T09:00:00.000Z',\n    endTime: '2024-10-17T10:30:00.000Z',\n    title: 'Entrevista',\n    description: 'Candidato nuevo',\n    status: 'confirmed',\n  },\n];\n\n// ID corto y único\nexport const generateId = () =>\n  Date.now().toString(36) + Math.random().toString(36).slice(2);\n\n// --- Bonus: utilidades para choques de horario (a usar cuando quieras) ---\nexport const overlaps = (aStart, aEnd, bStart, bEnd) =>\n  new Date(aStart) < new Date(bEnd) && new Date(bStart) < new Date(aEnd);\n\n// Añade/actualiza esta función en src/utils/reservations.js\nexport const hasRoomConflict = (\n  reservations,\n  { id, roomId, startTime, endTime },\n  bufferMin = 10 // <-- buffer configurable en minutos (default 10)\n) => {\n  const start = new Date(startTime).getTime();\n  const end = new Date(endTime).getTime();\n  const b = bufferMin * 60 * 1000; // a ms\n\n  return reservations.some((r) => {\n    if (!r?.room?.id) return false;\n    if (r.room.id !== roomId) return false;\n    if (r.id === id) return false;\n\n    const rs = new Date(r.startTime).getTime();\n    const re = new Date(r.endTime).getTime();\n\n    // Solape considerando buffer a ambos lados:\n    // [start, end] choca con [rs - b, re + b]\n    return start < (re + b) && (rs - b) < end;\n  });\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}