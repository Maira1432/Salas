{"ast":null,"code":"var _jsxFileName = \"/Users/mairaquintero/Desktop/project-salas/src/components/ReservationForm.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { Plus, Edit, Trash } from 'lucide-react';\nimport { format, addHours } from 'date-fns';\nimport { useNavigate } from 'react-router-dom';\nimport { generateId, hasRoomConflict } from '../utils/reservations';\n\n// Outlook / Graph\nimport { msalInstance } from '../msalConfig';\nimport { graphCreateEvent, graphUpdateEvent, graphHasConflict } from '../utils/graph';\n\n// Cat√°logo local de salas (si ya lo exportas desde utils, imp√≥rtalo en lugar de esto)\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst rooms = [{\n  id: '1',\n  nombre: \"C√≠rculo de Sabios I\",\n  capacidad: 5\n}, {\n  id: '2',\n  nombre: \"C√≠rculo de Sabios II\",\n  capacidad: 5\n}, {\n  id: '3',\n  nombre: \"C√≠rculo de Sabios III\",\n  capacidad: 5\n}, {\n  id: '4',\n  nombre: \"Consejo de la Tribu\",\n  capacidad: 12\n}, {\n  id: '5',\n  nombre: \"Plaza de Conexiones\",\n  capacidad: 6\n}];\n\n// --- helpers de validaci√≥n de correo ---\nconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/i;\nconst parseEmails = text => text.split(',').map(s => s.trim()).filter(Boolean);\nconst validateEmails = emails => emails.length === 0 || emails.every(e => emailRegex.test(e));\nconst ReservationForm = ({\n  userName,\n  reservationToEdit = null,\n  allReservations = [],\n  onUpsert // del Context: addOrUpdate\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    room: rooms[0],\n    startTime: new Date(),\n    duration: 1 // horas\n  });\n  const [editData, setEditData] = useState(null);\n  const [error, setError] = useState('');\n  const [syncInfo, setSyncInfo] = useState(''); // mensajes suaves de sincronizaci√≥n\n\n  // NUEVO: invitados\n  const [attendeesText, setAttendeesText] = useState(\"\"); // \"ana@empresa.com, juan@empresa.com\"\n  const [attendeesError, setAttendeesError] = useState(\"\");\n\n  // Cargar datos al editar\n  useEffect(() => {\n    if (reservationToEdit) {\n      setEditData(reservationToEdit);\n      setFormData({\n        title: reservationToEdit.title || '',\n        description: reservationToEdit.description || '',\n        room: reservationToEdit.room || rooms[0],\n        startTime: new Date(reservationToEdit.startTime),\n        duration: Math.max(0.25, (new Date(reservationToEdit.endTime) - new Date(reservationToEdit.startTime)) / (1000 * 60 * 60))\n      });\n      // Prellenar invitados si existen\n      const existingAtt = Array.isArray(reservationToEdit.attendees) ? reservationToEdit.attendees.join(', ') : '';\n      setAttendeesText(existingAtt);\n    } else {\n      setEditData(null);\n      setFormData({\n        title: '',\n        description: '',\n        room: rooms[0],\n        startTime: new Date(),\n        duration: 1\n      });\n      setAttendeesText('');\n    }\n    setError('');\n    setSyncInfo('');\n    setAttendeesError('');\n  }, [reservationToEdit]);\n  const handleSubmit = async e => {\n    var _formData$description;\n    e.preventDefault();\n    setError('');\n    setSyncInfo('');\n    setAttendeesError('');\n    const start = new Date(formData.startTime);\n    const end = addHours(start, Number(formData.duration || 1));\n\n    // Validaciones b√°sicas\n    if (!formData.title.trim()) {\n      setError('El t√≠tulo es obligatorio.');\n      return;\n    }\n    if (end <= start) {\n      setError('La hora de fin debe ser mayor a la de inicio.');\n      return;\n    }\n    if (formData.duration < 0.25 || formData.duration > 8) {\n      setError('La duraci√≥n debe estar entre 15 minutos y 8 horas.');\n      return;\n    }\n\n    // Invitados: parseo + validaci√≥n\n    const attendees = parseEmails(attendeesText);\n    if (!validateEmails(attendees)) {\n      setAttendeesError('Hay correos inv√°lidos. Revisa el formato (ej. nombre@dominio.com).');\n      return;\n    }\n\n    // Validaci√≥n de conflicto local (misma sala / solape)\n    const payloadPreview = {\n      id: (editData === null || editData === void 0 ? void 0 : editData.id) || generateId(),\n      room: formData.room,\n      startTime: start,\n      endTime: end\n    };\n    const localConflict = hasRoomConflict(allReservations, {\n      id: payloadPreview.id,\n      roomId: payloadPreview.room.id,\n      startTime: payloadPreview.startTime,\n      endTime: payloadPreview.endTime\n    });\n    if (localConflict) {\n      setError('‚ö†Ô∏è La sala ya est√° ocupada en ese rango horario. Elige otro horario o sala.');\n      return;\n    }\n\n    // Construir payload final\n    const payload = {\n      id: payloadPreview.id,\n      user: userName,\n      room: formData.room,\n      startTime: start,\n      endTime: end,\n      title: formData.title.trim(),\n      description: ((_formData$description = formData.description) === null || _formData$description === void 0 ? void 0 : _formData$description.trim()) || '',\n      status: (editData === null || editData === void 0 ? void 0 : editData.status) || 'pending',\n      outlookEventId: (editData === null || editData === void 0 ? void 0 : editData.outlookEventId) || undefined,\n      attendees // üëà NUEVO: se usa en graph.js para invitar\n    };\n\n    // Sincronizaci√≥n con Outlook (si hay sesi√≥n MSAL)\n    const account = msalInstance.getActiveAccount() || msalInstance.getAllAccounts()[0];\n    if (account) {\n      try {\n        // (Opcional) conflicto en Outlook del usuario (cualquier evento suyo)\n        const conflictOutlook = await graphHasConflict(payload.startTime.toISOString(), payload.endTime.toISOString(), payload.outlookEventId // üëà excluye el propio evento cuando est√°s editando\n        );\n        if (conflictOutlook) {\n          setError('‚ö†Ô∏è Ya tienes un evento en tu Outlook en ese rango. Cambia el horario.');\n          return;\n        }\n\n        // Crear o actualizar evento en Outlook\n        if (payload.outlookEventId) {\n          const ev = await graphUpdateEvent(payload.outlookEventId, payload);\n          payload.outlookEventId = (ev === null || ev === void 0 ? void 0 : ev.id) || payload.outlookEventId;\n          setSyncInfo('Evento actualizado en Outlook.');\n        } else {\n          const ev = await graphCreateEvent(payload);\n          payload.outlookEventId = ev === null || ev === void 0 ? void 0 : ev.id;\n          setSyncInfo('Evento creado en Outlook.');\n        }\n      } catch (e) {\n        // No bloqueamos el guardado local, pero avisamos\n        console.error('Graph error:', e);\n        setSyncInfo('No se pudo sincronizar con Outlook ahora. Guardado localmente.');\n      }\n    } else {\n      // Sin sesi√≥n: guardado local y mensaje suave\n      setSyncInfo('Reserva guardada localmente. Inicia sesi√≥n para sincronizar con Outlook.');\n    }\n\n    // Guardar en Context (persistente en localStorage por el Provider)\n    onUpsert === null || onUpsert === void 0 ? void 0 : onUpsert(payload);\n\n    // Reset si era creaci√≥n\n    if (!editData) {\n      setFormData({\n        title: '',\n        description: '',\n        room: rooms[0],\n        startTime: new Date(),\n        duration: 1\n      });\n      setAttendeesText(''); // üëà limpiar invitados\n    } else {\n      // Si era edici√≥n, puedes navegar o limpiar edit\n      // navigate('/my-reservations');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    className: \"bg-white/80 backdrop-blur-xl border border-gray-200/50 rounded-3xl p-6 shadow-xl\",\n    initial: {\n      opacity: 0,\n      y: 8\n    },\n    animate: {\n      opacity: 1,\n      y: 0\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center gap-2 mb-4\",\n      children: editData ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Edit, {\n          className: \"w-5 h-5 text-blue-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold\",\n          children: \"Editar Reserva\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Plus, {\n          className: \"w-5 h-5 text-green-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold\",\n          children: \"Nueva Reserva\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4 text-sm text-red-700 bg-red-50 border border-red-200 rounded-xl p-3\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }, this), syncInfo && !error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4 text-sm text-blue-700 bg-blue-50 border border-blue-200 rounded-xl p-3\",\n      children: syncInfo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"grid md:grid-cols-2 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"md:col-span-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-sm text-gray-600 mb-1\",\n          children: \"T\\xEDtulo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: formData.title,\n          onChange: e => setFormData({\n            ...formData,\n            title: e.target.value\n          }),\n          className: \"w-full rounded-xl border border-gray-200 px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500\",\n          placeholder: \"Ej. Reuni\\xF3n de proyecto\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-sm text-gray-600 mb-1\",\n          children: \"Sala\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: formData.room.id,\n          onChange: e => {\n            const r = rooms.find(x => x.id === e.target.value);\n            setFormData({\n              ...formData,\n              room: r || rooms[0]\n            });\n          },\n          className: \"w-full rounded-xl border border-gray-200 px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500\",\n          children: rooms.map(r => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: r.id,\n            children: [r.nombre, \" \\u2014 \", r.capacidad, \" pax\"]\n          }, r.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-sm text-gray-600 mb-1\",\n          children: \"Inicio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"datetime-local\",\n          value: format(formData.startTime, \"yyyy-MM-dd'T'HH:mm\"),\n          onChange: e => setFormData({\n            ...formData,\n            startTime: new Date(e.target.value)\n          }),\n          className: \"w-full rounded-xl border border-gray-200 px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-sm text-gray-600 mb-1\",\n          children: \"Duraci\\xF3n (horas)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          step: \"0.25\",\n          min: \"0.25\",\n          max: \"8\",\n          value: formData.duration,\n          onChange: e => setFormData({\n            ...formData,\n            duration: Number(e.target.value)\n          }),\n          className: \"w-full rounded-xl border border-gray-200 px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"md:col-span-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-sm text-gray-600 mb-1\",\n          children: \"Descripci\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          rows: 3,\n          value: formData.description,\n          onChange: e => setFormData({\n            ...formData,\n            description: e.target.value\n          }),\n          className: \"w-full rounded-xl border border-gray-200 px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500\",\n          placeholder: \"Notas, agenda, invitados, etc.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"md:col-span-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-sm text-gray-600 mb-1\",\n          children: \"Invitados (emails, separados por coma)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: attendeesText,\n          onChange: e => {\n            setAttendeesText(e.target.value);\n            if (attendeesError) setAttendeesError(\"\");\n          },\n          placeholder: \"ana@empresa.com, juan@empresa.com\",\n          className: \"w-full rounded-xl border border-gray-200 px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this), attendeesError && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-1 text-sm text-red-600\",\n          children: attendeesError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-1 text-xs text-gray-500\",\n          children: \"Outlook enviar\\xE1 invitaciones a estos correos.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"md:col-span-2 flex items-center gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(motion.button, {\n          type: \"submit\",\n          className: \"px-4 py-2 rounded-xl bg-blue-600 text-white font-medium shadow-md hover:bg-blue-700 transition\",\n          whileHover: {\n            scale: 1.02\n          },\n          whileTap: {\n            scale: 0.98\n          },\n          children: editData ? 'Guardar cambios' : 'Crear reserva'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }, this), editData && /*#__PURE__*/_jsxDEV(motion.button, {\n          type: \"button\",\n          onClick: () => {\n            setEditData(null);\n            setFormData({\n              title: '',\n              description: '',\n              room: rooms[0],\n              startTime: new Date(),\n              duration: 1\n            });\n            setError('');\n            setSyncInfo('');\n            setAttendeesText('');\n            setAttendeesError('');\n          },\n          className: \"flex items-center gap-2 text-red-600 hover:text-red-800\",\n          whileHover: {\n            scale: 1.05\n          },\n          children: [/*#__PURE__*/_jsxDEV(Trash, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 15\n          }, this), \" Cancelar edici\\xF3n\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 213,\n    columnNumber: 5\n  }, this);\n};\n_s(ReservationForm, \"1klN9C+CbTQwbVL/gOM0zQBfdBU=\", false, function () {\n  return [useNavigate];\n});\n_c = ReservationForm;\nexport default ReservationForm;\nvar _c;\n$RefreshReg$(_c, \"ReservationForm\");","map":{"version":3,"names":["React","useEffect","useState","motion","Plus","Edit","Trash","format","addHours","useNavigate","generateId","hasRoomConflict","msalInstance","graphCreateEvent","graphUpdateEvent","graphHasConflict","jsxDEV","_jsxDEV","Fragment","_Fragment","rooms","id","nombre","capacidad","emailRegex","parseEmails","text","split","map","s","trim","filter","Boolean","validateEmails","emails","length","every","e","test","ReservationForm","userName","reservationToEdit","allReservations","onUpsert","_s","navigate","formData","setFormData","title","description","room","startTime","Date","duration","editData","setEditData","error","setError","syncInfo","setSyncInfo","attendeesText","setAttendeesText","attendeesError","setAttendeesError","Math","max","endTime","existingAtt","Array","isArray","attendees","join","handleSubmit","_formData$description","preventDefault","start","end","Number","payloadPreview","localConflict","roomId","payload","user","status","outlookEventId","undefined","account","getActiveAccount","getAllAccounts","conflictOutlook","toISOString","ev","console","div","className","initial","opacity","y","animate","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","value","onChange","target","placeholder","required","r","find","x","type","step","min","rows","button","whileHover","scale","whileTap","onClick","_c","$RefreshReg$"],"sources":["/Users/mairaquintero/Desktop/project-salas/src/components/ReservationForm.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { Plus, Edit, Trash } from 'lucide-react';\nimport { format, addHours } from 'date-fns';\nimport { useNavigate } from 'react-router-dom';\n\nimport { generateId, hasRoomConflict } from '../utils/reservations';\n\n// Outlook / Graph\nimport { msalInstance } from '../msalConfig';\nimport {\n  graphCreateEvent,\n  graphUpdateEvent,\n  graphHasConflict,\n} from '../utils/graph';\n\n// Cat√°logo local de salas (si ya lo exportas desde utils, imp√≥rtalo en lugar de esto)\nconst rooms = [\n  { id: '1', nombre: \"C√≠rculo de Sabios I\", capacidad: 5 },\n  { id: '2', nombre: \"C√≠rculo de Sabios II\", capacidad: 5 },\n  { id: '3', nombre: \"C√≠rculo de Sabios III\", capacidad: 5 },\n  { id: '4', nombre: \"Consejo de la Tribu\", capacidad: 12 },\n  { id: '5', nombre: \"Plaza de Conexiones\", capacidad: 6 },\n];\n\n// --- helpers de validaci√≥n de correo ---\nconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/i;\nconst parseEmails = (text) =>\n  text\n    .split(',')\n    .map(s => s.trim())\n    .filter(Boolean);\nconst validateEmails = (emails) =>\n  emails.length === 0 || emails.every(e => emailRegex.test(e));\n\nconst ReservationForm = ({\n  userName,\n  reservationToEdit = null,\n  allReservations = [],\n  onUpsert, // del Context: addOrUpdate\n}) => {\n  const navigate = useNavigate();\n\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    room: rooms[0],\n    startTime: new Date(),\n    duration: 1, // horas\n  });\n\n  const [editData, setEditData] = useState(null);\n  const [error, setError] = useState('');\n  const [syncInfo, setSyncInfo] = useState(''); // mensajes suaves de sincronizaci√≥n\n\n  // NUEVO: invitados\n  const [attendeesText, setAttendeesText] = useState(\"\");   // \"ana@empresa.com, juan@empresa.com\"\n  const [attendeesError, setAttendeesError] = useState(\"\");\n\n  // Cargar datos al editar\n  useEffect(() => {\n    if (reservationToEdit) {\n      setEditData(reservationToEdit);\n      setFormData({\n        title: reservationToEdit.title || '',\n        description: reservationToEdit.description || '',\n        room: reservationToEdit.room || rooms[0],\n        startTime: new Date(reservationToEdit.startTime),\n        duration: Math.max(\n          0.25,\n          (new Date(reservationToEdit.endTime) - new Date(reservationToEdit.startTime)) / (1000 * 60 * 60)\n        ),\n      });\n      // Prellenar invitados si existen\n      const existingAtt = Array.isArray(reservationToEdit.attendees)\n        ? reservationToEdit.attendees.join(', ')\n        : '';\n      setAttendeesText(existingAtt);\n    } else {\n      setEditData(null);\n      setFormData({\n        title: '',\n        description: '',\n        room: rooms[0],\n        startTime: new Date(),\n        duration: 1,\n      });\n      setAttendeesText('');\n    }\n    setError('');\n    setSyncInfo('');\n    setAttendeesError('');\n  }, [reservationToEdit]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setSyncInfo('');\n    setAttendeesError('');\n\n    const start = new Date(formData.startTime);\n    const end = addHours(start, Number(formData.duration || 1));\n\n    // Validaciones b√°sicas\n    if (!formData.title.trim()) {\n      setError('El t√≠tulo es obligatorio.');\n      return;\n    }\n    if (end <= start) {\n      setError('La hora de fin debe ser mayor a la de inicio.');\n      return;\n    }\n    if (formData.duration < 0.25 || formData.duration > 8) {\n      setError('La duraci√≥n debe estar entre 15 minutos y 8 horas.');\n      return;\n    }\n\n    // Invitados: parseo + validaci√≥n\n    const attendees = parseEmails(attendeesText);\n    if (!validateEmails(attendees)) {\n      setAttendeesError('Hay correos inv√°lidos. Revisa el formato (ej. nombre@dominio.com).');\n      return;\n    }\n\n    // Validaci√≥n de conflicto local (misma sala / solape)\n    const payloadPreview = {\n      id: editData?.id || generateId(),\n      room: formData.room,\n      startTime: start,\n      endTime: end,\n    };\n    const localConflict = hasRoomConflict(allReservations, {\n      id: payloadPreview.id,\n      roomId: payloadPreview.room.id,\n      startTime: payloadPreview.startTime,\n      endTime: payloadPreview.endTime,\n    });\n    if (localConflict) {\n      setError('‚ö†Ô∏è La sala ya est√° ocupada en ese rango horario. Elige otro horario o sala.');\n      return;\n    }\n\n    // Construir payload final\n    const payload = {\n      id: payloadPreview.id,\n      user: userName,\n      room: formData.room,\n      startTime: start,\n      endTime: end,\n      title: formData.title.trim(),\n      description: formData.description?.trim() || '',\n      status: editData?.status || 'pending',\n      outlookEventId: editData?.outlookEventId || undefined,\n      attendees, // üëà NUEVO: se usa en graph.js para invitar\n    };\n\n    // Sincronizaci√≥n con Outlook (si hay sesi√≥n MSAL)\n    const account = msalInstance.getActiveAccount() || msalInstance.getAllAccounts()[0];\n\n    if (account) {\n      try {\n        // (Opcional) conflicto en Outlook del usuario (cualquier evento suyo)\n        const conflictOutlook = await graphHasConflict(\n          payload.startTime.toISOString(),\n          payload.endTime.toISOString(),\n          payload.outlookEventId // üëà excluye el propio evento cuando est√°s editando\n        );\n        if (conflictOutlook) {\n          setError('‚ö†Ô∏è Ya tienes un evento en tu Outlook en ese rango. Cambia el horario.');\n          return;\n        }\n\n        // Crear o actualizar evento en Outlook\n        if (payload.outlookEventId) {\n          const ev = await graphUpdateEvent(payload.outlookEventId, payload);\n          payload.outlookEventId = ev?.id || payload.outlookEventId;\n          setSyncInfo('Evento actualizado en Outlook.');\n        } else {\n          const ev = await graphCreateEvent(payload);\n          payload.outlookEventId = ev?.id;\n          setSyncInfo('Evento creado en Outlook.');\n        }\n      } catch (e) {\n        // No bloqueamos el guardado local, pero avisamos\n        console.error('Graph error:', e);\n        setSyncInfo('No se pudo sincronizar con Outlook ahora. Guardado localmente.');\n      }\n    } else {\n      // Sin sesi√≥n: guardado local y mensaje suave\n      setSyncInfo('Reserva guardada localmente. Inicia sesi√≥n para sincronizar con Outlook.');\n    }\n\n    // Guardar en Context (persistente en localStorage por el Provider)\n    onUpsert?.(payload);\n\n    // Reset si era creaci√≥n\n    if (!editData) {\n      setFormData({\n        title: '',\n        description: '',\n        room: rooms[0],\n        startTime: new Date(),\n        duration: 1,\n      });\n      setAttendeesText(''); // üëà limpiar invitados\n    } else {\n      // Si era edici√≥n, puedes navegar o limpiar edit\n      // navigate('/my-reservations');\n    }\n  };\n\n  return (\n    <motion.div\n      className=\"bg-white/80 backdrop-blur-xl border border-gray-200/50 rounded-3xl p-6 shadow-xl\"\n      initial={{ opacity: 0, y: 8 }}\n      animate={{ opacity: 1, y: 0 }}\n    >\n      <div className=\"flex items-center gap-2 mb-4\">\n        {editData ? (\n          <>\n            <Edit className=\"w-5 h-5 text-blue-600\" />\n            <h3 className=\"text-lg font-semibold\">Editar Reserva</h3>\n          </>\n        ) : (\n          <>\n            <Plus className=\"w-5 h-5 text-green-600\" />\n            <h3 className=\"text-lg font-semibold\">Nueva Reserva</h3>\n          </>\n        )}\n      </div>\n\n      {error && (\n        <div className=\"mb-4 text-sm text-red-700 bg-red-50 border border-red-200 rounded-xl p-3\">\n          {error}\n        </div>\n      )}\n      {syncInfo && !error && (\n        <div className=\"mb-4 text-sm text-blue-700 bg-blue-50 border border-blue-200 rounded-xl p-3\">\n          {syncInfo}\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit} className=\"grid md:grid-cols-2 gap-4\">\n        {/* T√≠tulo */}\n        <div className=\"md:col-span-2\">\n          <label className=\"block text-sm text-gray-600 mb-1\">T√≠tulo</label>\n          <input\n            value={formData.title}\n            onChange={e => setFormData({ ...formData, title: e.target.value })}\n            className=\"w-full rounded-xl border border-gray-200 px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Ej. Reuni√≥n de proyecto\"\n            required\n          />\n        </div>\n\n        {/* Sala */}\n        <div>\n          <label className=\"block text-sm text-gray-600 mb-1\">Sala</label>\n          <select\n            value={formData.room.id}\n            onChange={(e) => {\n              const r = rooms.find(x => x.id === e.target.value);\n              setFormData({ ...formData, room: r || rooms[0] });\n            }}\n            className=\"w-full rounded-xl border border-gray-200 px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500\"\n          >\n            {rooms.map(r => (\n              <option key={r.id} value={r.id}>\n                {r.nombre} ‚Äî {r.capacidad} pax\n              </option>\n            ))}\n          </select>\n        </div>\n\n        {/* Inicio */}\n        <div>\n          <label className=\"block text-sm text-gray-600 mb-1\">Inicio</label>\n          <input\n            type=\"datetime-local\"\n            value={format(formData.startTime, \"yyyy-MM-dd'T'HH:mm\")}\n            onChange={(e) => setFormData({ ...formData, startTime: new Date(e.target.value) })}\n            className=\"w-full rounded-xl border border-gray-200 px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500\"\n          />\n        </div>\n\n        {/* Duraci√≥n */}\n        <div>\n          <label className=\"block text-sm text-gray-600 mb-1\">Duraci√≥n (horas)</label>\n          <input\n            type=\"number\"\n            step=\"0.25\"\n            min=\"0.25\"\n            max=\"8\"\n            value={formData.duration}\n            onChange={(e) => setFormData({ ...formData, duration: Number(e.target.value) })}\n            className=\"w-full rounded-xl border border-gray-200 px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500\"\n          />\n        </div>\n\n        {/* Descripci√≥n */}\n        <div className=\"md:col-span-2\">\n          <label className=\"block text-sm text-gray-600 mb-1\">Descripci√≥n</label>\n          <textarea\n            rows={3}\n            value={formData.description}\n            onChange={e => setFormData({ ...formData, description: e.target.value })}\n            className=\"w-full rounded-xl border border-gray-200 px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Notas, agenda, invitados, etc.\"\n          />\n        </div>\n\n        {/* Invitados */}\n        <div className=\"md:col-span-2\">\n          <label className=\"block text-sm text-gray-600 mb-1\">\n            Invitados (emails, separados por coma)\n          </label>\n          <input\n            value={attendeesText}\n            onChange={(e) => {\n              setAttendeesText(e.target.value);\n              if (attendeesError) setAttendeesError(\"\");\n            }}\n            placeholder=\"ana@empresa.com, juan@empresa.com\"\n            className=\"w-full rounded-xl border border-gray-200 px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500\"\n          />\n          {attendeesError && (\n            <p className=\"mt-1 text-sm text-red-600\">{attendeesError}</p>\n          )}\n          <p className=\"mt-1 text-xs text-gray-500\">\n            Outlook enviar√° invitaciones a estos correos.\n          </p>\n        </div>\n\n        {/* Botones */}\n        <div className=\"md:col-span-2 flex items-center gap-3\">\n          <motion.button\n            type=\"submit\"\n            className=\"px-4 py-2 rounded-xl bg-blue-600 text-white font-medium shadow-md hover:bg-blue-700 transition\"\n            whileHover={{ scale: 1.02 }}\n            whileTap={{ scale: 0.98 }}\n          >\n            {editData ? 'Guardar cambios' : 'Crear reserva'}\n          </motion.button>\n\n          {editData && (\n            <motion.button\n              type=\"button\"\n              onClick={() => {\n                setEditData(null);\n                setFormData({ title: '', description: '', room: rooms[0], startTime: new Date(), duration: 1 });\n                setError('');\n                setSyncInfo('');\n                setAttendeesText('');\n                setAttendeesError('');\n              }}\n              className=\"flex items-center gap-2 text-red-600 hover:text-red-800\"\n              whileHover={{ scale: 1.05 }}\n            >\n              <Trash className=\"w-4 h-4\" /> Cancelar edici√≥n\n            </motion.button>\n          )}\n        </div>\n      </form>\n    </motion.div>\n  );\n};\n\nexport default ReservationForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}